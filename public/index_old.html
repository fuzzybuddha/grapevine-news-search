<html>
<body>
<div id="country_0"></div>
<div id="country_1"></div>
</body>
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script>
	//connect to server
	var socket = io.connect('http://127.0.0.1:8081');
	//when ack message is emitted
	socket.on('ack', function (data) {
		var countries = data;
		console.log(countries);

		socket.emit('search', 'gorilla attacks');
		var country_data = {countries:['us', 'fr']};
		socket.emit('countries', JSON.stringify(country_data));
		socket.on('news', function(data) {
			console.log('news received');
			var country_code = data.country_code;
			var news = data.news;
			var news_item = '<a href=' + news[0].url + '>' +news[0].title + '<br>' + news[0].summary +'</a><br><img src=' + news[0].imageUrl + '>';
			if (country_code == 'us')
			{
				$('#country_0').html(news_item);
			}
			else
			{
				$('#country_1').html(news_item);			
			}
		});
		socket.on('error', function(err){
			console.log("error: " + err);
		});
	});

	function print(obj) {
		for (var property in obj) {
		    if (obj.hasOwnProperty(property)) {
		        console.log(property + ':' + obj[property]);
		    }
		}
	}
</script>
</html>